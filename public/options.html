<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dev Support Extension - Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>üõ†Ô∏è Dev Support Extension</h1>
      <p class="subtitle">Configuration & Settings</p>
    </header>
    
    <main class="main-content">
      <!-- Feature Controls Section -->
      <section class="settings-section">
        <h2>üéõÔ∏è Feature Controls</h2>
        
        <div class="feature-toggle">
          <div class="feature-info">
            <h3>üåü Medium Freedium Redirect</h3>
            <p class="feature-description">Adds a button on Medium pages to redirect to Freedium for free access</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="mediumFreedium" class="feature-checkbox">
            <span class="slider"></span>
          </label>
        </div>
        
        <div class="feature-toggle">
          <div class="feature-info">
            <h3>üìã JSON Viewer</h3>
            <p class="feature-description">Automatically formats and enhances JSON data display on API endpoints</p>
            <small class="config-help">üí° Test with: <a href="https://dummyjson.com/products" target="_blank" style="color: #667eea;">https://dummyjson.com/products</a></small>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="jsonViewer" class="feature-checkbox">
            <span class="slider"></span>
          </label>
        </div>
      </section>

      <!-- History Management Configuration -->
      <section class="settings-section">
        <h2>üóëÔ∏è History Management Configuration</h2>
        
        <div class="feature-toggle">
          <div class="feature-info">
            <h3>üïê Automatic History Deletion</h3>
            <p class="feature-description">Automatically delete browser history based on your configured schedule</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="historyDeletion" class="feature-checkbox">
            <span class="slider"></span>
          </label>
        </div>
        
        <div id="historyConfig" class="config-panel" style="display: none;">
          <div class="config-grid">
            <div class="config-item">
              <label for="retentionDays">Keep history for (days):</label>
              <input type="number" id="retentionDays" min="0" max="365" value="30" class="config-input">
              <small class="config-help">Set to 0 to delete ALL history</small>
            </div>
            
            <div class="config-item">
              <label for="deletionInterval">Check interval:</label>
              <select id="deletionInterval" class="config-select">
                <option value="daily">Daily</option>
                <option value="weekly" selected>Weekly</option>
                <option value="monthly">Monthly</option>
              </select>
            </div>
            
            <div class="config-item full-width">
              <label class="checkbox-label">
                <input type="checkbox" id="deleteOnStartup">
                <span>Delete old history when extension starts</span>
              </label>
            </div>
            
            <div class="config-item full-width">
              <label for="excludePatterns">Exclude URLs (one per line):</label>
              <textarea id="excludePatterns" class="config-textarea" placeholder="google.com*&#10;github.com*&#10;stackoverflow.com*&#10;*.important-site.com" rows="4"></textarea>
              <small class="config-help">Use * as wildcard. Example: *.google.com or github.com*</small>
            </div>
          </div>
          
          <div class="config-info">
            <div class="info-icon">‚ö†Ô∏è</div>
            <div class="info-text">
              <strong>Important:</strong> This feature will delete history from all your Chrome-synced devices. 
              Automatic deletion uses the most efficient method available (bulk deletion when no exclusions are set).
            </div>
          </div>
          
          <div class="config-actions">
            <button id="saveHistoryConfig" class="config-btn config-btn--primary">Save Configuration</button>
            <button id="resetHistoryConfig" class="config-btn config-btn--secondary">Reset to Defaults</button>
          </div>
          
          <div id="historyStats" class="stats-panel">
            <h4>üìä History Statistics</h4>
            <div class="stats-grid">
              <div class="stats-item">
                <span class="stats-label">Total History Items:</span>
                <span id="totalHistoryItems" class="stats-value">Loading...</span>
              </div>
              <div class="stats-item">
                <span class="stats-label">Recent Items (30 days):</span>
                <span id="recentHistoryItems" class="stats-value">Loading...</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Proxy Configuration Section -->
      <section class="settings-section">
        <h2>üåê Proxy Configuration</h2>
        
        <div class="feature-toggle">
          <div class="feature-info">
            <h3>üîó Proxy Management</h3>
            <p class="feature-description">Configure HTTP, HTTPS, SOCKS4, and SOCKS5 proxies with domain-specific routing</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="proxyEnabled" class="feature-checkbox">
            <span class="slider"></span>
          </label>
        </div>
        
        <div id="proxyConfig" class="config-panel" style="display: none;">
          <!-- Global Proxy Settings -->
          <div class="proxy-section">
            <h4>üåç Global Proxy (Default for all domains)</h4>
            <div class="feature-toggle">
              <div class="feature-info">
                <span>Enable global proxy</span>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="globalProxyEnabled" class="feature-checkbox">
                <span class="slider"></span>
              </label>
            </div>
            
            <div id="globalProxyConfig" class="proxy-config-form" style="display: none;">
              <div class="config-grid">
                <div class="config-item">
                  <label for="globalProxyType">Type:</label>
                  <select id="globalProxyType" class="config-select">
                    <option value="http">HTTP</option>
                    <option value="https">HTTPS</option>
                    <option value="socks4">SOCKS4</option>
                    <option value="socks5">SOCKS5</option>
                  </select>
                </div>
                <div class="config-item">
                  <label for="globalProxyHost">Host:</label>
                  <input type="text" id="globalProxyHost" class="config-input" placeholder="127.0.0.1">
                </div>
                <div class="config-item">
                  <label for="globalProxyPort">Port:</label>
                  <input type="number" id="globalProxyPort" class="config-input" min="1" max="65535" placeholder="8080">
                </div>
                <div class="config-item">
                  <label for="globalProxyUsername">Username (optional):</label>
                  <input type="text" id="globalProxyUsername" class="config-input" placeholder="username">
                </div>
                <div class="config-item">
                  <label for="globalProxyPassword">Password (optional):</label>
                  <input type="password" id="globalProxyPassword" class="config-input" placeholder="password">
                </div>
                <div class="config-item full-width">
                  <label for="globalProxyBypass">Bypass list (one per line):</label>
                  <textarea id="globalProxyBypass" class="config-textarea" placeholder="localhost&#10;127.0.0.1&#10;*.local&#10;*.internal" rows="3"></textarea>
                  <small class="config-help">Domains that should bypass the proxy. Use * as wildcard.</small>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Domain-Specific Proxy Rules -->
          <div class="proxy-section">
            <h4>üìã Domain-Specific Proxy Rules</h4>
            <div class="proxy-rules-header">
              <button id="addProxyRule" class="config-btn config-btn--primary">+ Add Rule</button>
              <button id="testAllProxies" class="config-btn config-btn--secondary">üß™ Test All</button>
              <button id="showProxyDebug" class="config-btn config-btn--secondary">üîç Debug Info</button>
            </div>
            
            <div id="proxyRulesList" class="proxy-rules-list">
              <!-- Proxy rules will be dynamically added here -->
            </div>
          </div>
          
          <div class="config-actions">
            <button id="saveProxyConfig" class="config-btn config-btn--primary">Save Proxy Configuration</button>
            <button id="resetProxyConfig" class="config-btn config-btn--secondary">Reset to Defaults</button>
            <button id="exportProxyConfig" class="config-btn config-btn--secondary">Export Config</button>
            <button id="importProxyConfig" class="config-btn config-btn--secondary">Import Config</button>
          </div>
          
          <!-- Troubleshooting Guide -->
          <div class="config-info">
            <div class="info-icon">üîß</div>
            <div class="info-text">
              <strong>Troubleshooting Proxy Issues:</strong>
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li><strong>Proxy not working:</strong> Check host format (no http://, just IP/domain), verify port number, ensure proxy server is running</li>
                <li><strong>Authentication issues:</strong> Some proxies require both username AND password, check credentials with proxy provider</li>
                <li><strong>SOCKS vs HTTP:</strong> Use SOCKS4/5 for general traffic, HTTP/HTTPS for web browsing only</li>
                <li><strong>Domain patterns:</strong> Use *.domain.com for subdomains, domain.com for exact match</li>
                <li><strong>Test fails but credentials correct:</strong> This is normal - extension testing is limited, try browsing to verify</li>
                <li><strong>Check if working:</strong> Visit a matching domain, open F12 ‚Üí Console, look for [PAC] debug messages</li>
                <li><strong>Example test:</strong> Rule for *.httpbin.org ‚Üí visit httpbin.org/ip to see if proxy IP shows</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Quick Actions Info -->
      <section class="settings-section">
        <h2>‚ö° Quick Actions</h2>
        <div class="info-card">
          <div class="info-icon">üí°</div>
          <div class="info-content">
            <h3>Use the Extension Popup for Quick Actions</h3>
            <p>Click the extension icon in your toolbar to access quick history deletion, screen capture, and other instant actions.</p>
          </div>
        </div>
      </section>
    </main>
    
    <footer class="footer">
      <div class="footer-content">
        <p>Dev Support Extension v2.0.0</p>
        <div class="footer-links">
          <button id="openPopup" class="link-btn">Open Quick Actions</button>
          <span>‚Ä¢</span>
          <a href="#" id="exportSettings" class="link-btn">Export Settings</a>
          <span>‚Ä¢</span>
          <a href="#" id="importSettings" class="link-btn">Import Settings</a>
        </div>
      </div>
    </footer>
  </div>
  
  <!-- Hidden file input for import -->
  <input type="file" id="importFile" accept=".json" style="display: none;">
  <input type="file" id="importProxyFile" accept=".json" style="display: none;">
  
  <!-- Status Messages -->
  <div id="statusMessage" class="status-message" style="display: none;"></div>
  
  <script src="options.js"></script>
</body>
</html>